{"ast":null,"code":"import _asyncToGenerator from\"/Users/kostadindev/PycharmProjects/rfc_qa_generation/recursive-qa/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kostadindev/PycharmProjects/rfc_qa_generation/recursive-qa/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/kostadindev/PycharmProjects/rfc_qa_generation/recursive-qa/frontend/node_modules/@babel/runtime/regenerator/index.js\";import'./App.css';import Navigation from'./Navigation/Navigation.js';import QAContainer from\"./QAContainer/QAContainer\";import History from\"./History/History\";import React,{useState,useEffect}from'react';import Data from\"./DataTab/Data\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),instructions=_useState2[0],setInstructions=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),history=_useState4[0],setHistory=_useState4[1];var _useState5=useState(localStorage.getItem('mode')?localStorage.getItem('mode'):\"left\"),_useState6=_slicedToArray(_useState5,2),mode=_useState6[0],setMode=_useState6[1];var _useState7=useState(localStorage.getItem('user')?JSON.parse(localStorage.getItem('user')):null),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),records=_useState10[0],setRecords=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),scheduled=_useState12[0],setScheduled=_useState12[1];var fetchRecords=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userData){var requestOptions;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:requestOptions={method:'POST',headers:{'Content-Type':'application/json'},cors:'no-cors',body:JSON.stringify({user:userData})};_context2.next=3;return fetch('http://localhost:5050/records',requestOptions).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var _response$headers$get;var isJson,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isJson=(_response$headers$get=response.headers.get('content-type'))===null||_response$headers$get===void 0?void 0:_response$headers$get.includes('application/json');_context.t0=isJson;if(!_context.t0){_context.next=6;break;}_context.next=5;return response.json();case 5:_context.t0=_context.sent;case 6:data=_context.t0;if(response.ok){_context.next=10;break;}error=data&&data.message||response.status;return _context.abrupt(\"return\",Promise.reject(error));case 10:if(!(records!=data.records)){_context.next=16;break;}console.log(\"updating records\");_context.next=14;return setRecords(data.records);case 14:_context.next=16;return setScheduled(data.records.filter(function(record){return\"scheduled\"in record&&record['scheduled']===true;}));case 16:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){alert(error);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchRecords(_x){return _ref.apply(this,arguments);};}();var clearData=function clearData(){setRecords([]);};useEffect(function(){if(user&&!records.length){fetchRecords(user);}},[records]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navigation,{instructions:instructions,setInstructions:setInstructions,user:user,setUser:setUser,mode:mode,setMode:setMode,setRecords:setRecords,fetchRecords:fetchRecords,clearData:clearData}),mode===\"tool\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(QAContainer,{instructions:instructions,scheduled:scheduled,setScheduled:setScheduled,history:history,setHistory:setHistory,user:user,fetchRecords:fetchRecords,mode:mode}),/*#__PURE__*/_jsx(History,{history:history,setHistory:setHistory,user:user})]}):/*#__PURE__*/_jsx(Data,{user:user,records:records,setRecords:setRecords,scheduled:scheduled,setScheduled:setScheduled,fetchRecords:fetchRecords})]});}export default App;","map":{"version":3,"sources":["/Users/kostadindev/PycharmProjects/rfc_qa_generation/recursive-qa/frontend/src/App.js"],"names":["Navigation","QAContainer","History","React","useState","useEffect","Data","App","instructions","setInstructions","history","setHistory","localStorage","getItem","mode","setMode","JSON","parse","user","setUser","records","setRecords","scheduled","setScheduled","fetchRecords","userData","requestOptions","method","headers","cors","body","stringify","fetch","then","response","isJson","get","includes","json","data","ok","error","message","status","Promise","reject","console","log","filter","record","catch","alert","clearData","length"],"mappings":"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","sourcesContent":["import './App.css';\nimport Navigation from './Navigation/Navigation.js';\nimport QAContainer from \"./QAContainer/QAContainer\";\nimport History from \"./History/History\";\nimport React, {useState, useEffect} from 'react';\nimport Data from \"./DataTab/Data\";\n\nfunction App() {\n    const [instructions, setInstructions] = useState(true);\n    const [history, setHistory] = useState([]);\n    const [mode, setMode] = useState(\n        localStorage.getItem('mode') ? (localStorage.getItem('mode')) : \"left\");\n    const [user, setUser] = useState(\n        localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : null);\n    const [records, setRecords] = useState([]);\n    const [scheduled, setScheduled] = useState([]);\n\n    const fetchRecords = async (userData) => {\n        const requestOptions = {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            cors: 'no-cors',\n            body: JSON.stringify({user: userData})\n        };\n        await fetch('http://localhost:5050/records', requestOptions)\n            .then(async response => {\n                const isJson = response.headers.get('content-type')?.includes('application/json');\n                const data = isJson && await response.json();\n                if (!response.ok) {\n                    const error = (data && data.message) || response.status;\n                    return Promise.reject(error);\n                }\n                if (records != data.records) {\n                    console.log(\"updating records\")\n                    await setRecords(data.records);\n                    await setScheduled(data.records.filter((record) => \"scheduled\" in record && record['scheduled'] === true));\n                }\n            })\n            .catch(error => {\n                alert(error);\n            });\n    }\n    const clearData = () => {\n        setRecords([]);\n    }\n\n    useEffect(() => {\n        if (user && !records.length) {\n            fetchRecords(user)\n        }\n    }, [records]);\n    return (\n        <div className=\"App\">\n            <Navigation instructions={instructions} setInstructions={setInstructions} user={user} setUser={setUser}\n                        mode={mode} setMode={setMode} setRecords={setRecords} fetchRecords={fetchRecords}\n                        clearData={clearData}/>\n            {\n                mode === \"tool\" ?\n                    <>\n                        <QAContainer instructions={instructions}\n                                     scheduled={scheduled} setScheduled={setScheduled}\n                                     history={history} setHistory={setHistory}\n                                     user={user}\n                                     fetchRecords={fetchRecords}\n                                     mode={mode}\n                        />\n                        <History history={history} setHistory={setHistory} user={user}/>\n                    </>\n                    : <Data user={user}\n                            records={records} setRecords={setRecords}\n                            scheduled={scheduled} setScheduled={setScheduled}\n                            fetchRecords={fetchRecords}/>\n            }\n\n        </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}